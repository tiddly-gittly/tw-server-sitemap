title: $:/plugins/linonetwo/check-website/readme
type: text/vnd.tiddlywiki

! check-website

Check website availability and display status as a badge.

{{!!.alert}}
<div class="tc-message-box">

''⚠️ Limitations:''

This widget is subject to browser security restrictions (CORS/CORP). It works best for:

* Your own websites where you control CORS headers
* Sites with permissive CORS policies

It may not work accurately for:

* Sites with strict Cross-Origin-Resource-Policy (CORP) headers
* Detecting specific errors (404, 500) on CORS-restricted sites

See [[CORS Explained|$:/plugins/linonetwo/check-website/cors-explained]] for details.

</div>

!! Usage

Basic usage:

```
<$check-website url="https://tiddlywiki.com/" />
```

<$check-website url="https://tiddlywiki.com/" /> <$check-website url="https://tiddlywiki-not-exist.com/" />

With custom label:

```
<$check-website url="https://tiddlywiki.com/" label="Tiddly! Wiki!" />
```

A beautiful badge will show, act as a clickable link to the website.

<$check-website url="https://tiddlywiki.com/" label="Tiddly! Wiki!" />

With custom check interval:

```
<$check-website url="https://example.com/" label="Example" interval="3s" />
```

<$check-website url="https://example.com/" label="Example" interval="300s" />

You can see web request in your browser's web dev-tool every 3 seconds.

!! Parameters

* ''url'' - (required) The website URL to check
* ''label'' - (optional) Custom label for the badge. If not provided, uses the hostname from the URL
* ''interval'' - (optional) Check interval. Default is `1h`. Supports formats like `5s`, `30m`, `1h`, `1h30m`, `1h30m5s`. Supports seconds (s), minutes (m), and hours (h)
* ''follow-redirects'' - (optional) Whether to follow HTTP redirects (3xx). Default is `yes`. If set to `no`, redirects will be shown as offline
* ''use-get'' - (optional) Use GET request instead of HEAD. Default is `no`. Set to `yes` for servers that don't support HEAD properly (like some TiddlyWiki servers). This avoids 404 errors in console but uses more bandwidth
* ''background-mode'' - (optional) Run checks in background without displaying the badge. Default is `no`
* ''connect-actions'' - (optional) Action string to invoke when website comes online. Available variables: `status` (current status), `url` (the checked URL)
* ''disconnect-actions'' - (optional) Action string to invoke when website goes offline. Available variables: `status` (current status), `url` (the checked URL)

!! Examples

Check TiddlyWiki official site every hour:

```
<$check-website url="https://tiddlywiki.com/" label="TW" interval="1h" />
```

Check multiple websites:

```
<$check-website url="https://tiddlywiki.com/" label="TiddlyWiki" />
<$check-website url="https://github.com/" label="GitHub" />
<$check-website url="https://nodejs.org/" label="Node.js" interval="2h" />
```

Check TiddlyWiki server (use GET to avoid console errors):

```
<$check-website url="https://wiki.example.com/" label="My Wiki" use-get="yes" />
```

Background monitoring with actions:

```
<$check-website 
  url="https://myserver.com/" 
  background-mode="yes" 
  interval="5m"
  disconnect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
  connect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
/>
```

Or save status to a regular tiddler:

<$check-website 
  url="https://api.example.com/" 
  interval="5m"
  disconnect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
  connect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
/>

[[$:/state/ServerStatus]]

```
<$check-website 
  url="https://api.example.com/" 
  interval="1m"
  disconnect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
  connect-actions="""
    <$action-createtiddler $basetitle='$:/state/ServerStatus' text={{{ [<status>addprefix[Server ]addsuffix[: ]addsuffix<url>] }}}>
      <$action-sendmessage $message='tm-notify' $param=<<createTiddler-title>> />
    </$action-createtiddler>
  """
/>
```

Check without following redirects:

```
<$check-website url="https://example.com/" follow-redirects="no" />
```

!! Features

* Automatically checks website availability at specified intervals
* Displays status as a clean badge (similar to GitHub badges)
* Shows "Online" (green), "Offline" (red), or "Checking..." (gray) status
* Hover over the badge to see detailed status information (HTTP status code or CORS mode)
* Uses the hostname as label when no custom label is provided
* Clickable badge - click to open the website in a new tab
* Lightweight and efficient
* Checks full URL path, not just domain (detects 404 errors)
* Supports HTTP redirects (3xx) with configurable behavior
* Background monitoring mode without visible badge
* Action triggers on status changes (online/offline)
* CORS-aware: tries normal fetch first, falls back to no-cors mode if needed

!! Understanding Status Messages

The badge shows simple status text ("Online", "Offline", etc.), but you can hover over it to see detailed information:

* When HTTP status code is available, the tooltip shows: `HTTP 200`, `HTTP 404`, etc.
* When CORS policy prevents reading the status code, the tooltip explains this
* See [[CORS Explained|$:/plugins/linonetwo/check-website/cors-explained]] for detailed information about why you might see different tooltip messages
